{% load static %}

<head>
  <link
    href="https://code.jquery.com/ui/1.12.1/themes/base/jquery-ui.css"
    rel="stylesheet"
  />
  <link
    href="https://maxcdn.bootstrapcdn.com/bootstrap/3.4.1/css/bootstrap.min.css"
    rel="stylesheet"
  />
  <link
    crossorigin="anonymous"
    href="https://cdnjs.cloudflare.com/ajax/libs/bootstrap-datetimepicker/4.17.47/css/bootstrap-datetimepicker.css"
    integrity="sha512-63+XcK3ZAZFBhAVZ4irKWe9eorFG0qYsy2CaM5Z+F3kUn76ukznN0cp4SArgItSbDFD1RrrWgVMBY9C/2ZoURA=="
    rel="stylesheet"
  />
  <link
    crossorigin="anonymous"
    href="https://cdnjs.cloudflare.com/ajax/libs/bootstrap-datetimepicker/4.17.47/css/bootstrap-datetimepicker.min.css"
    integrity="sha512-aEe/ZxePawj0+G2R+AaIxgrQuKT68I28qh+wgLrcAJOz3rxCP+TwrK5SPN+E5I+1IQjNtcfvb96HDagwrKRdBw=="
    rel="stylesheet"
  />
  <link
    crossorigin="anonymous"
    href="https://cdnjs.cloudflare.com/ajax/libs/bootstrap-datetimepicker/4.17.47/css/bootstrap-datetimepicker-standalone.css"
    integrity="sha512-2e0Kl/wKgOUm/I722SOPMtmphkIjECJFpJrTRRyL8gjJSJIP2VofmEbqyApMaMfFhU727K3voz0e5EgE3Zf2Dg=="
    rel="stylesheet"
  />
  <link
    crossorigin="anonymous"
    href="https://cdnjs.cloudflare.com/ajax/libs/bootstrap-datetimepicker/4.17.47/css/bootstrap-datetimepicker-standalone.min.css"
    integrity="sha512-tjNtfoH+ezX5NhKsxuzHc01N4tSBoz15yiML61yoQN/kxWU0ChLIno79qIjqhiuTrQI0h+XPpylj0eZ9pKPQ9g=="
    rel="stylesheet"
  />
  <link
    href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css"
    rel="stylesheet"
  />

  <style>
    /* Just makin' it look nice. */
    body {
      background: #3240a8;
      min-height: 600px;
    }

    .conditional {
      margin: 1em 0 0.5em;
      border-top: 2px dotted #eee;
      padding-top: 1em;
      color: rgba(0, 0, 0, 0.7);
      font-size: 0.9em;
    }

    .conditional > .conditional {
      color: rgba(0, 0, 0, 0.5);
    }

    #demo {
      text-align: left;
      padding: 1.5em 3em;
      background: #fff;
      width: 100%;
      margin: 2em auto;
      border-radius: 0.5em;
      font: 18px/22px "Open Sans", Arial, Verdana, serif;
    }

    /* label+label {
            margin-left: 1em;
        } */
    label {
      white-space: pre-wrap;
    }

    input + span {
      position: absolute;
      left: 0;
      top: 4px;
      width: 15px;
      height: 15px;
      border: 2px solid #6ab5a8;
    }

    input[type="radio"] + span {
      border-radius: 50%;
    }

    input[type="radio"]:checked + span {
      background: rgba(106, 181, 169, 1);
      background: -moz-radial-gradient(
        center,
        ellipse cover,
        rgba(106, 181, 169, 1) 44%,
        rgba(255, 255, 255, 1) 45%,
        rgba(255, 255, 255, 1) 46%,
        rgba(255, 255, 255, 1) 55%
      );
      background: -webkit-gradient(
        radial,
        center center,
        0px,
        center center,
        100%,
        color-stop(44%, rgba(106, 181, 169, 1)),
        color-stop(45%, rgba(255, 255, 255, 1)),
        color-stop(46%, rgba(255, 255, 255, 1)),
        color-stop(55%, rgba(255, 255, 255, 1))
      );
      background: -webkit-radial-gradient(
        center,
        ellipse cover,
        rgba(106, 181, 169, 1) 44%,
        rgba(255, 255, 255, 1) 45%,
        rgba(255, 255, 255, 1) 46%,
        rgba(255, 255, 255, 1) 55%
      );
      background: -o-radial-gradient(
        center,
        ellipse cover,
        rgba(106, 181, 169, 1) 44%,
        rgba(255, 255, 255, 1) 45%,
        rgba(255, 255, 255, 1) 46%,
        rgba(255, 255, 255, 1) 55%
      );
      background: -ms-radial-gradient(
        center,
        ellipse cover,
        rgba(106, 181, 169, 1) 44%,
        rgba(255, 255, 255, 1) 45%,
        rgba(255, 255, 255, 1) 46%,
        rgba(255, 255, 255, 1) 55%
      );
      background: radial-gradient(
        ellipse at center,
        rgba(106, 181, 169, 1) 44%,
        rgba(255, 255, 255, 1) 45%,
        rgba(255, 255, 255, 1) 46%,
        rgba(255, 255, 255, 1) 55%
      );
      filter: progid:DXImageTransform.Microsoft.gradient(startColorstr='#6ab5a9', endColorstr='#ffffff', GradientType=1);
    }

    input[type="checkbox"]:checked + span:after {
      content: "\00d7";
      font-weight: bold;
      position: absolute;
      top: -7px;
      left: 1px;
      font-size: 20px;
      color: #6ab5a8;
    }

    input[type="radio"],
    input[type="checkbox"] {
      /*hide the radio button*/
      filter: alpha(opacity=0);
      -moz-opacity: 0;
      -khtml-opacity: 0;
      opacity: 0;
    }

    select,
    input[type="text"] {
      border-radius: 5px;
      padding: 6px 10px;
      border: 2px solid #3240a8;
      color: #666;
      font-size: 15px;
      width: 65%;
    }

    .currency-wrap {
      position: relative;
      margin-bottom: 10px;
    }

    .currency-code {
      position: absolute;
      left: 8px;
      /* top:3.5px;
        }
        
        .number-currency{
          padding-left: 18px; */
      top: 8px;
    }

    .number-currency {
      border-radius: 5px;
      padding: 6px 19px;
      border: 2px solid #00008b;
      color: #666;
      font-size: 15px;
      width: 65%;
    }
    h3{
    font-size: 20px;
    font-weight: bolder;
  } 

    .percent-code {
      position: absolute;
      left: 58%;
      top: 8px;
    }

    .number-price {
      border-radius: 5px;
      padding: 6px 10px;
      border: 2px solid #00008b;
      color: #666;
      font-size: 15px;
      width: 65%;
    }

    .zip-code {
      border-radius: 5px;
      padding: 6px 10px;
      border: 2px solid #00008b;
      color: #666;
      font-size: 15px;
      width: 65%;
      padding-left: 9px;
    }
  </style>
</head>

<body>
  <div id="demo" class="container-fluid">
    {% if opp_stage != "Terminated" %}
    <div class="row">
      
      <a
        id="toggle"
        class="select-terminate mt-4 btn btn-danger"
        style="float: right;"
        type="submit"
        value="submit"
        title="Terminate Transaction"
      >
      Terminate
      <i title="Terminate Transaction" class="fa-solid fa-ban"></i>
    </a>
    </div>
    {% endif %}
    <form method="POST" id="update_form">
      {% csrf_token %}
      <div id="update" style="display: block">

      <input hidden name="fub_deal_id" value="{{fub_deal_id}}" />
      <input hidden name="previous_fub_deal_stage_name" value="{{opp_stage}}" />
      <input hidden name="domain" value="{{domain}}" />
      <input hidden name="appt_set_entry_id" value="{{appt_set_entry_id}}" />
      <input hidden name="appt_set_lead_type" value="{{appt_set_lead_type}}" />
      <input hidden name="appt_set_platform" value="{{appt_set_platform}}" />
      <input hidden name="opp_type" value="{{opp_type}}" />
      
      {% if opp_stage != "Terminated" %}
      <div>
        <h3 style="text-align: center">
          Update Transaction: {{opp_type}} - {{opp_last_name}} <br />
            <div style="margin-top: 1%" {% if planFubWufoo == True %} class="hide" {% endif %}>
              <a
                href="https://my.sisu.co/transactions/edit/{{sisu_client_id}}"
                target="_blank"
              >
                <button class="btn btn-primary btn-lg center-btn" type="button">
                  View Sisu Client
                </button>
              </a>
            </div>
        </h3>
        <br />

        {% if opp_stage == "Appointment Set" %}
        <label>Appointment Disposition:</label><br />
        {% else %}

        <label>Stage:</label> <br />
        {% endif %}
        <select id="stage_select" class="select float-right" name="opp_stage">
          <option value="">Pick one!</option>

          <!-- <option id="Appointment Set" value="Appointment_Set">Appointment Set</option> -->
          {% if opp_stage == "Pipeline" %}
          <option id="Appointment Set" value="Appointment_Set">Appointment Set</option>
          <option id="Agreement Signed" value="Agreement_Signed">Agreement Signed</option>
          <option id="Pending" value="Pending">Pending</option>
          <option id="Closed" value="Closed">Closed</option>
          {% elif opp_stage == "Appointment Set" %}
          <option id="Appointment Met" value="Appointment_Met">
            Appointment Met
          </option>
          <option id="Appointment Missed" value="Appointment_Missed">
            Appointment Missed
          </option>
          {% elif opp_stage == "Appointment Met" %}
          <option id="Agreement Signed" value="Agreement_Signed">
            Agreement Signed
          </option>
          <option id="Pending" value="Pending">Pending</option>
          <option id="Closed" value="Closed">Closed</option>
          {% elif opp_stage == "Agreement Signed" %}
          <option id="Pending" value="Pending">Pending</option>
          <option id="Closed" value="Closed">Closed</option>
          {% elif opp_stage == "Pending" %}
          <option id="Closed" value="Closed">Closed</option>
          <option id="Pending Cancelled" value="Pending Cancelled">Pending Cancelled</option>
          
          {% endif %}
          <option hidden id="Terminated" value="Terminated">Terminated</option>
        </select>
        <!-- <script>document.getElementById("{{stageName}}").selected = true;</script> -->
      </div>
      {% else %}
      <div>
        <h3 style="text-align: center;">Terminated Transaction: {{opp_type}} - {{opp_last_name}}
          <br> <div style="margin-top: 1%">
              <a class="btn btn-primary btn-lg float-right" onclick='location.href = "{% url 'list_view' %}?context={{context_data}}&signature={{signature}}"' >Back</a>
      </div>
      </h3>
      </div> 
      {% endif %}
        

      <div
        class="conditional"
        data-cond-option="opp_stage"
        data-cond-value="Appointment_Set"
      >
        <label>Lead Type: </label><br />
        <input hidden id="opp_type" name="opp_type" value="{{opp_type}}" />
        <select id="opp_type_app_set" class="select" disabled name="opp_type">
          <option>Pick one!</option>
          <option id="opt-set-Buyer" value="Buyer">Buyer</option>
          <option id="opt-set-Seller" value="Seller">Seller</option>
          <option id="opt-set-BuyerSeller" value="BuyerSeller">BuyerSeller</option>
        </select>
        <script>
          document.getElementById("opt-set-{{opp_type}}").selected = true;
        </script>
        <p>
          <label>Assigned OSA: </label><br />
          <select aria-readonly="true" class="select float-right readonly" name="opp_assigned_osa">
              <option selected value="">Pick one!</option>
              {% for item in isa_list %}
              <option id="{{item.name}}" {% if opp_assigned_osa == item.name %}selected{% endif %} value="{{item.name}}">{{item.name}}</option>
              {% endfor %}
          </select>

      </p>
      <p>
          <label>Description </label><br/>
          <textarea class="number-price" readonly id="opp_notes" value="{{opp_notes}}" name="opp_notes" placeholder="" type="text">{{opp_notes}}</textarea>
      </p>
      <p>
          <label>ISA: </label><br />
          <select aria-readonly="true" class="select float-right readonly" name="opp_isa">
              <option selected value="">Pick one!</option>
              {% for item in isa_list %}
              <option id="{{item.name}}" {% if opp_isa == item.name %}selected  {% endif %} value="{{item.name}}">{{item.name}}</option>
              {% endfor %}
          </select>

      </p>
        <p class="input-group date">
          <label>Appoitnment Date: </label><br />
          <input
            id="Appoitnment_Date_1"
            name="opp_appt_date"
            placeholder=""
            type="text"
            value="{{opp_appt_date}}"
          />
        </p>
        <p>
                <label>Appointment Time: <sup><i class="fa fa-asterisk"
                                                 style="font-size:8px;color:red"></i></sup></label><br/>
                <select class="select float-right Appointment_Set" name="opp_appt_time">
                    <option value="" selected>Pick one!</option>
                    <option value="07:30 AM">07:30 AM</option>
                    <option value="07:45 AM">07:45 AM</option>
                    <option value="08:00 AM">08:00 AM</option>
                    <option value="08:15 AM">08:15 AM</option>
                    <option value="08:30 AM">08:30 AM</option>
                    <option value="08:45 AM">08:45 AM</option>
                    <option value="09:00 AM">09:00 AM</option>
                    <option value="09:15 AM">09:15 AM</option>
                    <option value="09:30 AM">09:30 AM</option>
                    <option value="09:45 AM">09:45 AM</option>
                    <option value="10:00 AM">10:00 AM</option>
                    <option value="10:15 AM">10:15 AM</option>
                    <option value="10:30 AM">10:30 AM</option>
                    <option value="10:45 AM">10:45 AM</option>
                    <option value="11:00 AM">11:00 AM</option>
                    <option value="11:15 AM">11:15 AM</option>
                    <option value="11:30 AM">11:30 AM</option>
                    <option value="11:45 AM">11:45 AM</option>
                    <option value="12:00 PM">12:00 PM</option>
                    <option value="12:15 PM">12:15 PM</option>
                    <option value="12:30 PM">12:30 PM</option>
                    <option value="12:45 PM">12:45 PM</option>
                    <option value="01:00 PM">01:00 PM</option>
                    <option value="01:15 PM">01:15 PM</option>
                    <option value="01:30 PM">01:30 PM</option>
                    <option value="01:45 PM">01:45 PM</option>
                    <option value="02:00 PM">02:00 PM</option>
                    <option value="02:15 PM">02:15 PM</option>
                    <option value="02:30 PM">02:30 PM</option>
                    <option value="02:45 PM">02:45 PM</option>
                    <option value="03:00 PM">03:00 PM</option>
                    <option value="03:15 PM">03:15 PM</option>
                    <option value="03:30 PM">03:30 PM</option>
                    <option value="03:45 PM">03:45 PM</option>
                    <option value="04:00 PM">04:00 PM</option>
                    <option value="04:15 PM">04:15 PM</option>
                    <option value="04:30 PM">04:30 PM</option>
                    <option value="04:45 PM">04:45 PM</option>
                    <option value="05:00 PM">05:00 PM</option>
                    <option value="05:15 PM">05:15 PM</option>
                    <option value="05:30 PM">05:30 PM</option>
                    <option value="05:45 PM">05:45 PM</option>
                    <option value="06:00 PM">06:00 PM</option>
                    <option value="06:15 PM">06:15 PM</option>
                    <option value="06:30 PM">06:30 PM</option>
                    <option value="06:45 PM">06:45 PM</option>
                    <option value="07:00 PM">07:00 PM</option>
                    <option value="07:15 PM">07:15 PM</option>
                    <option value="07:30 PM">07:30 PM</option>
                    <option value="07:45 PM">07:45 PM</option>
                    <option value="08:00 PM">08:00 PM</option>
                    <option value="08:15 PM">08:15 PM</option>
                    <option value="08:30 PM">08:30 PM</option>
                </select>
            </p>
        <div
          class="conditional"
          data-cond-option="opp_type"
          data-cond-value="Seller"
        >
          <p>
            <label
              >Address:<sup
                ><i
                  class="fa fa-asterisk"
                  style="font-size: 8px; color: red"
                ></i></sup></label
            ><br />
            <input
              class="opt-set-Seller"
              name="opp_address"
              placeholder=""
              type="text"
              value="{{opp_address}}"
            />
          </p>
          <p>
            <label
              >City:<sup
                ><i
                  class="fa fa-asterisk"
                  style="font-size: 8px; color: red"
                ></i></sup></label
            ><br />
            <input
              class="opt-set-Seller"
              name="opp_city"
              placeholder=""
              type="text"
              value="{{opp_city}}"
            />
          </p>
          <p>
            <label
              >State:<sup
                ><i
                  class="fa fa-asterisk"
                  style="font-size: 8px; color: red"
                ></i></sup></label
            ><br />
            <select
              class="select opt-set-Seller"
              name="opp_state"
              value="{{opp_state}}"
            >
              <optgroup label="None">
                <option value="{{opp_state}}">{{opp_state}}</option>
              </optgroup>
              <optgroup label="United States">
                <option value="AK">Alaska</option>
                <option value="AL">Alabama</option>
                <option value="AR">Arkansas</option>
                <option value="AS">American Samoa</option>
                <option value="AZ">Arizona</option>
                <option value="CA">California</option>
                <option value="CO">Colorado</option>
                <option value="CT">Connecticut</option>
                <option value="DC">District of Columbia</option>
                <option value="DE">Delaware</option>
                <option value="FL">Florida</option>
                <option value="GA">Georgia</option>
                <option value="GU">Guam</option>
                <option value="HI">Hawaii</option>
                <option value="IA">Iowa</option>
                <option value="ID">Idaho</option>
                <option value="IL">Illinois</option>
                <option value="IN">Indiana</option>
                <option value="KS">Kansas</option>
                <option value="KY">Kentucky</option>
                <option value="LA">Louisiana</option>
                <option value="MA">Massachusetts</option>
                <option value="MD">Maryland</option>
                <option value="ME">Maine</option>
                <option value="MI">Michigan</option>
                <option value="MN">Minnesota</option>
                <option value="MO">Missouri</option>
                <option value="MP">Northern Mariana Islands</option>
                <option value="MS">Mississippi</option>
                <option value="MT">Montana</option>
                <option value="NA">National</option>
                <option value="NC">North Carolina</option>
                <option value="ND">North Dakota</option>
                <option value="NE">Nebraska</option>
                <option value="NH">New Hampshire</option>
                <option value="NJ">New Jersey</option>
                <option value="NM">New Mexico</option>
                <option value="NV">Nevada</option>
                <option value="NY">New York</option>
                <option value="OH">Ohio</option>
                <option value="OK">Oklahoma</option>
                <option value="OR">Oregon</option>
                <option value="PA">Pennsylvania</option>
                <option value="PR">Puerto Rico</option>
                <option value="RI">Rhode Island</option>
                <option value="SC">South Carolina</option>
                <option value="SD">South Dakota</option>
                <option value="TN">Tennessee</option>
                <option value="TX">Texas</option>
                <option value="UT">Utah</option>
                <option value="VA">Virginia</option>
                <option value="VI">Virgin Islands</option>
                <option value="VT">Vermont</option>
                <option value="WA">Washington</option>
                <option value="WI">Wisconsin</option>
                <option value="WV">West Virginia</option>
                <option value="WY">Wyoming</option>
              </optgroup>
              <optgroup label="Canada">
                <option value="AB">Alberta</option>
                <option value="BC">British Columbia</option>
                <option value="MB">Manitoba</option>
                <option value="NB">New Brunswick</option>
                <option value="NL">Newfoundland and Labrador</option>
                <option value="NT">Northwest Territories</option>
                <option value="NS">Nova Scotia</option>
                <option value="NU">Nunavut</option>
                <option value="ON">Ontario</option>
                <option value="PE">Prince Edward Island</option>
                <option value="QC">Quebec</option>
                <option value="SK">Saskatchewan</option>
                <option value="YT">Yukon</option>
              </optgroup>
            </select>
          </p>
          <p>
            <label
              >Zip Code:<sup
                ><i
                  class="fa fa-asterisk"
                  style="font-size: 8px; color: red"
                ></i></sup></label
            ><br />
            <input
              class="zip-code opt-set-Seller"
              name="opp_zipcode"
              placeholder=""
              type="number"
              value="{{opp_postal_code}}"
              onkeydown="javascript: return event.keyCode === 8 ||
                    event.keyCode === 46 ? true : !isNaN(Number(event.key))"
            />
          </p>
        </div>
        <div
          class="conditional"
          data-cond-option="opp_type"
          data-cond-value="BuyerSeller"
        >
          <p>
            <label
              >Address:<sup
                ><i
                  class="fa fa-asterisk"
                  style="font-size: 8px; color: red"
                ></i></sup></label
            ><br />
            <input
              class="opt-set-BuyerSeller"
              name="opp_address"
              placeholder=""
              type="text"
              value="{{opp_address}}"
            />
          </p>
          <p>
            <label
              >City:<sup
                ><i
                  class="fa fa-asterisk"
                  style="font-size: 8px; color: red"
                ></i></sup></label
            ><br />
            <input
              class="opt-set-BuyerSeller"
              name="opp_city"
              placeholder=""
              type="text"
              value="{{opp_city}}"
            />
          </p>
          <p>
            <label
              >State:<sup
                ><i
                  class="fa fa-asterisk"
                  style="font-size: 8px; color: red"
                ></i></sup></label
            ><br />
            <select
              class="select opt-set-BuyerSeller"
              name="opp_state"
              value="{{opp_state}}"
            >
              <optgroup label="None">
                <option value="{{opp_state}}">{{opp_state}}</option>
              </optgroup>
              <optgroup label="United States">
                <option value="AK">Alaska</option>
                <option value="AL">Alabama</option>
                <option value="AR">Arkansas</option>
                <option value="AS">American Samoa</option>
                <option value="AZ">Arizona</option>
                <option value="CA">California</option>
                <option value="CO">Colorado</option>
                <option value="CT">Connecticut</option>
                <option value="DC">District of Columbia</option>
                <option value="DE">Delaware</option>
                <option value="FL">Florida</option>
                <option value="GA">Georgia</option>
                <option value="GU">Guam</option>
                <option value="HI">Hawaii</option>
                <option value="IA">Iowa</option>
                <option value="ID">Idaho</option>
                <option value="IL">Illinois</option>
                <option value="IN">Indiana</option>
                <option value="KS">Kansas</option>
                <option value="KY">Kentucky</option>
                <option value="LA">Louisiana</option>
                <option value="MA">Massachusetts</option>
                <option value="MD">Maryland</option>
                <option value="ME">Maine</option>
                <option value="MI">Michigan</option>
                <option value="MN">Minnesota</option>
                <option value="MO">Missouri</option>
                <option value="MP">Northern Mariana Islands</option>
                <option value="MS">Mississippi</option>
                <option value="MT">Montana</option>
                <option value="NA">National</option>
                <option value="NC">North Carolina</option>
                <option value="ND">North Dakota</option>
                <option value="NE">Nebraska</option>
                <option value="NH">New Hampshire</option>
                <option value="NJ">New Jersey</option>
                <option value="NM">New Mexico</option>
                <option value="NV">Nevada</option>
                <option value="NY">New York</option>
                <option value="OH">Ohio</option>
                <option value="OK">Oklahoma</option>
                <option value="OR">Oregon</option>
                <option value="PA">Pennsylvania</option>
                <option value="PR">Puerto Rico</option>
                <option value="RI">Rhode Island</option>
                <option value="SC">South Carolina</option>
                <option value="SD">South Dakota</option>
                <option value="TN">Tennessee</option>
                <option value="TX">Texas</option>
                <option value="UT">Utah</option>
                <option value="VA">Virginia</option>
                <option value="VI">Virgin Islands</option>
                <option value="VT">Vermont</option>
                <option value="WA">Washington</option>
                <option value="WI">Wisconsin</option>
                <option value="WV">West Virginia</option>
                <option value="WY">Wyoming</option>
              </optgroup>
              <optgroup label="Canada">
                <option value="AB">Alberta</option>
                <option value="BC">British Columbia</option>
                <option value="MB">Manitoba</option>
                <option value="NB">New Brunswick</option>
                <option value="NL">Newfoundland and Labrador</option>
                <option value="NT">Northwest Territories</option>
                <option value="NS">Nova Scotia</option>
                <option value="NU">Nunavut</option>
                <option value="ON">Ontario</option>
                <option value="PE">Prince Edward Island</option>
                <option value="QC">Quebec</option>
                <option value="SK">Saskatchewan</option>
                <option value="YT">Yukon</option>
              </optgroup>
            </select>
          </p>
          <p>
            <label
              >Zip Code:<sup
                ><i
                  class="fa fa-asterisk"
                  style="font-size: 8px; color: red"
                ></i></sup></label
            ><br />
            <input
              class="zip-code opt-set-BuyerSeller"
              name="opp_zipcode"
              placeholder=""
              type="number"
              value="{{opp_postal_code}}"
              onkeydown="javascript: return event.keyCode === 8 ||
                    event.keyCode === 46 ? true : !isNaN(Number(event.key))"
            />
          </p>
        </div>
      </div>
      <div
        class="conditional"
        data-cond-option="opp_stage"
        data-cond-value="Appointment_Met"
      >
        <input hidden name="opp_appt_disposition" value="Yes" />
        <p>
          <label>Appt Met Date: </label><br />
          <input
            id="Appt_Met_Date"
            name="opp_appt_met_date"
            placeholder=""
            type="text"
            value="{{opp_appt_met_date}}"
          />
        </p>
      </div>
      <div
        class="conditional"
        data-cond-option="opp_stage"
        data-cond-value="Appointment_Missed"
      >
        <input hidden name="opp_appt_disposition" value="No" />
      </div>

      <!-- Starting Appointment form contents -->
      <div
        class="conditional"
        data-cond-option="opp_stage"
        data-cond-value="Agreement_Signed"
      >
        <p>
          <label>Transaciton Type:</label><br />
          <input hidden id="opp_type" name="opp_type" value="{{opp_type}}" />
          <select id="Agreement_Signed_Type" class="select" disabled id="opp_type" name="opp_type">
            <option>Pick one!</option>
            <option id="opt-signed-Buyer" value="Buyer">Buyer</option>
            <option id="opt-signed-Seller" value="Seller">Seller</option>
          </select>
        </p>
        <script>
          document.getElementById("opt-signed-{{opp_type}}").selected = true;
        </script>
        <label>Commission Percent:</label>
        <div class="currency-wrap">
          <span class="percent-code">%</span>
          <input
            class="number-price"
            name="opp_commission_percent"
            placeholder=""
            type="number"
            step="any"
            value="{{opp_commission_percent}}"
            onkeydown="return event.keyCode !== 69"
          />
        </div>
        <label>Transaction Price:</label>
        <div class="currency-wrap">
          <span class="currency-code">$</span>
          <input
            class="number-currency"
            name="opp_price"
            placeholder=""
            type="number"
            step="any"
            value="{{opp_price}}"
            onkeydown="return event.keyCode !== 69"
          />
        </div>
        <p class="input-group date">
          <label
            >Agreement Signed Date:<sup
              ><i
                class="fa fa-asterisk"
                style="font-size: 8px; color: red"
              ></i></sup></label
          ><br />
          <input
            id="Agreement_Signed_Date_1"
            name="opp_agreement_signed_date"
            placeholder=""
            type="text"
            value="{{opp_agreement_signed_date}}"
          />
        </p>
        <p class="input-group date">
          <label
            >Agreement Expiration Date:<sup
              ><i
                class="fa fa-asterisk"
                style="font-size: 8px; color: red"
              ></i></sup></label
          ><br />
          <input
            id="Agreement_Expiration_Date_1"
            name="opp_agreement_expiration_date"
            placeholder=""
            type="text"
            value="{{opp_agreement_expiration_date}}"
          />
        </p>
        <p class="input-group date">
          <label>Forecasted Close Date:</label><br />
          <input
            id="Forecasted_Close_Date_1"
            name="opp_forecasted_close_date"
            placeholder=""
            type="text"
            value="{{opp_forecasted_close_date}}"
          />
        </p>
        <div
          class="conditional"
          data-cond-option="opp_type"
          data-cond-value="Seller"
        >
          <p>
            <label
              >Address:<sup
                ><i
                  class="fa fa-asterisk"
                  style="font-size: 8px; color: red"
                ></i></sup></label
            ><br />
            <input
              class="opt-signed-Seller"
              name="opp_address"
              placeholder=""
              type="text"
              value="{{opp_address}}"
            />
          </p>
          <p>
            <label
              >City:<sup
                ><i
                  class="fa fa-asterisk"
                  style="font-size: 8px; color: red"
                ></i></sup></label
            ><br />
            <input
              class="opt-signed-Seller"
              name="opp_city"
              placeholder=""
              type="text"
              value="{{opp_city}}"
            />
          </p>
          <p>
            <label
              >State:<sup
                ><i
                  class="fa fa-asterisk"
                  style="font-size: 8px; color: red"
                ></i></sup></label
            ><br />
            <select
              class="select opt-signed-Seller"
              name="opp_state"
              value="{{opp_state}}"
            >
              <option value="{{opp_state}}">{{opp_state}}</option>
              <optgroup label="United States">
                <option value="AK">Alaska</option>
                <option value="AL">Alabama</option>
                <option value="AR">Arkansas</option>
                <option value="AS">American Samoa</option>
                <option value="AZ">Arizona</option>
                <option value="CA">California</option>
                <option value="CO">Colorado</option>
                <option value="CT">Connecticut</option>
                <option value="DC">District of Columbia</option>
                <option value="DE">Delaware</option>
                <option value="FL">Florida</option>
                <option value="GA">Georgia</option>
                <option value="GU">Guam</option>
                <option value="HI">Hawaii</option>
                <option value="IA">Iowa</option>
                <option value="ID">Idaho</option>
                <option value="IL">Illinois</option>
                <option value="IN">Indiana</option>
                <option value="KS">Kansas</option>
                <option value="KY">Kentucky</option>
                <option value="LA">Louisiana</option>
                <option value="MA">Massachusetts</option>
                <option value="MD">Maryland</option>
                <option value="ME">Maine</option>
                <option value="MI">Michigan</option>
                <option value="MN">Minnesota</option>
                <option value="MO">Missouri</option>
                <option value="MP">Northern Mariana Islands</option>
                <option value="MS">Mississippi</option>
                <option value="MT">Montana</option>
                <option value="NA">National</option>
                <option value="NC">North Carolina</option>
                <option value="ND">North Dakota</option>
                <option value="NE">Nebraska</option>
                <option value="NH">New Hampshire</option>
                <option value="NJ">New Jersey</option>
                <option value="NM">New Mexico</option>
                <option value="NV">Nevada</option>
                <option value="NY">New York</option>
                <option value="OH">Ohio</option>
                <option value="OK">Oklahoma</option>
                <option value="OR">Oregon</option>
                <option value="PA">Pennsylvania</option>
                <option value="PR">Puerto Rico</option>
                <option value="RI">Rhode Island</option>
                <option value="SC">South Carolina</option>
                <option value="SD">South Dakota</option>
                <option value="TN">Tennessee</option>
                <option value="TX">Texas</option>
                <option value="UT">Utah</option>
                <option value="VA">Virginia</option>
                <option value="VI">Virgin Islands</option>
                <option value="VT">Vermont</option>
                <option value="WA">Washington</option>
                <option value="WI">Wisconsin</option>
                <option value="WV">West Virginia</option>
                <option value="WY">Wyoming</option>
              </optgroup>
              <optgroup label="Canada">
                <option value="AB">Alberta</option>
                <option value="BC">British Columbia</option>
                <option value="MB">Manitoba</option>
                <option value="NB">New Brunswick</option>
                <option value="NL">Newfoundland and Labrador</option>
                <option value="NT">Northwest Territories</option>
                <option value="NS">Nova Scotia</option>
                <option value="NU">Nunavut</option>
                <option value="ON">Ontario</option>
                <option value="PE">Prince Edward Island</option>
                <option value="QC">Quebec</option>
                <option value="SK">Saskatchewan</option>
                <option value="YT">Yukon</option>
              </optgroup>
            </select>
          </p>
          <p>
            <label
              >Zip Code:<sup
                ><i
                  class="fa fa-asterisk"
                  style="font-size: 8px; color: red"
                ></i></sup></label
            ><br />
            <input
              class="zip-code opt-signed-Seller"
              name="opp_zipcode"
              placeholder=""
              type="number"
              value="{{opp_postal_code}}"
              onkeydown="javascript: return event.keyCode === 8 ||
                    event.keyCode === 46 ? true : !isNaN(Number(event.key))"
            />
          </p>
        </div>
      </div>

      <!-- Starting Appointment form contents -->
      <div
        class="conditional"
        data-cond-option="opp_stage"
        data-cond-value="Pending"
      >
        <p>
          <label>Transaciton Type:</label><br />
          <input hidden id="opp_type" name="opp_type" value="{{opp_type}}" />
          <select class="select" disabled name="opp_type">
            <option>Pick one!</option>
            <option id="opt-pending-Buyer" value="Buyer">Buyer</option>
            <option id="opt-pending-Seller" value="Seller">Seller</option>
          </select>
        </p>
        <script>
          document.getElementById("opt-pending-{{opp_type}}").selected = true;
        </script>

        <label>Transaction Price:</label><br />
        <div class="currency-wrap">
          <span class="currency-code">$</span>
          <input
            class="number-currency"
            name="opp_price"
            placeholder=""
            type="number"
            step="any"
            value="{{opp_price}}"
            onkeydown="return event.keyCode !== 69"
          />
        </div>

        <label>Commission Percent:</label><br />
        <div class="currency-wrap">
          <span class="percent-code">%</span>
          <input
            class="number-price"
            name="opp_commission_percent"
            placeholder=""
            type="number"
            step="any"
            value="{{opp_commission_percent}}"
            onkeydown="return event.keyCode !== 69"
          />
        </div>

        <p>
          <label
            >Address:<sup
              ><i
                class="fa fa-asterisk"
                style="font-size: 8px; color: red"
              ></i></sup></label
          ><br />
          <input
            class="Pending"
            name="opp_address"
            placeholder=""
            type="text"
            value="{{opp_address}}"
          />
        </p>
        <p>
          <label
            >City:<sup
              ><i
                class="fa fa-asterisk"
                style="font-size: 8px; color: red"
              ></i></sup></label
          ><br />
          <input
            class="Pending"
            name="opp_city"
            placeholder=""
            type="text"
            value="{{opp_city}}"
          />
        </p>
        <p>
          <label
            >State:<sup
              ><i
                class="fa fa-asterisk"
                style="font-size: 8px; color: red"
              ></i></sup></label
          ><br />
          <select
            class="select Pending"
            name="opp_state"
            value="{{opp_state}}"
          >
            <option value="{{opp_state}}">{{opp_state}}</option>
            <optgroup label="United States">
              <option value="AK">Alaska</option>
              <option value="AL">Alabama</option>
              <option value="AR">Arkansas</option>
              <option value="AS">American Samoa</option>
              <option value="AZ">Arizona</option>
              <option value="CA">California</option>
              <option value="CO">Colorado</option>
              <option value="CT">Connecticut</option>
              <option value="DC">District of Columbia</option>
              <option value="DE">Delaware</option>
              <option value="FL">Florida</option>
              <option value="GA">Georgia</option>
              <option value="GU">Guam</option>
              <option value="HI">Hawaii</option>
              <option value="IA">Iowa</option>
              <option value="ID">Idaho</option>
              <option value="IL">Illinois</option>
              <option value="IN">Indiana</option>
              <option value="KS">Kansas</option>
              <option value="KY">Kentucky</option>
              <option value="LA">Louisiana</option>
              <option value="MA">Massachusetts</option>
              <option value="MD">Maryland</option>
              <option value="ME">Maine</option>
              <option value="MI">Michigan</option>
              <option value="MN">Minnesota</option>
              <option value="MO">Missouri</option>
              <option value="MP">Northern Mariana Islands</option>
              <option value="MS">Mississippi</option>
              <option value="MT">Montana</option>
              <option value="NA">National</option>
              <option value="NC">North Carolina</option>
              <option value="ND">North Dakota</option>
              <option value="NE">Nebraska</option>
              <option value="NH">New Hampshire</option>
              <option value="NJ">New Jersey</option>
              <option value="NM">New Mexico</option>
              <option value="NV">Nevada</option>
              <option value="NY">New York</option>
              <option value="OH">Ohio</option>
              <option value="OK">Oklahoma</option>
              <option value="OR">Oregon</option>
              <option value="PA">Pennsylvania</option>
              <option value="PR">Puerto Rico</option>
              <option value="RI">Rhode Island</option>
              <option value="SC">South Carolina</option>
              <option value="SD">South Dakota</option>
              <option value="TN">Tennessee</option>
              <option value="TX">Texas</option>
              <option value="UT">Utah</option>
              <option value="VA">Virginia</option>
              <option value="VI">Virgin Islands</option>
              <option value="VT">Vermont</option>
              <option value="WA">Washington</option>
              <option value="WI">Wisconsin</option>
              <option value="WV">West Virginia</option>
              <option value="WY">Wyoming</option>
            </optgroup>
            <optgroup label="Canada">
              <option value="AB">Alberta</option>
              <option value="BC">British Columbia</option>
              <option value="MB">Manitoba</option>
              <option value="NB">New Brunswick</option>
              <option value="NL">Newfoundland and Labrador</option>
              <option value="NT">Northwest Territories</option>
              <option value="NS">Nova Scotia</option>
              <option value="NU">Nunavut</option>
              <option value="ON">Ontario</option>
              <option value="PE">Prince Edward Island</option>
              <option value="QC">Quebec</option>
              <option value="SK">Saskatchewan</option>
              <option value="YT">Yukon</option>
            </optgroup>
          </select>
        </p>
        <p>
          <label
            >Zip Code:<sup
              ><i
                class="fa fa-asterisk"
                style="font-size: 8px; color: red"
              ></i></sup></label
          ><br />
          <input
            class="zip-code Pending"
            name="opp_zipcode"
            placeholder=""
            type="number"
            value="{{opp_postal_code}}"
            onkeydown="javascript: return event.keyCode === 8 ||
                event.keyCode === 46 ? true : !isNaN(Number(event.key))"
          />
        </p>
        <p class="input-group date">
          <label
            >Under Contract Date:<sup
              ><i
                class="fa fa-asterisk"
                style="font-size: 8px; color: red"
              ></i></sup></label
          ><br />
          <input
            class="Pending"
            id="Under_Contract_Date_2"
            name="opp_under_contract_date"
            placeholder=""
            type="text"
            value="{{opp_under_contract_date}}"
          />
        </p>
        <p class="input-group date">
          <label>Forecasted Close Date:</label><br />
          <input
            id="Forecasted_Close_Date_2"
            name="opp_forecasted_close_date"
            placeholder=""
            type="text"
            value="{{opp_forecasted_close_date}}"
          />
        </p>
      </div>

      <!-- Starting Appointment form contents -->
      <div
        class="conditional"
        data-cond-option="opp_stage"
        data-cond-value="Closed"
      >
        <p>
          <label>Transaciton Type:</label><br />
          <input hidden id="opp_type" name="opp_type" value="{{opp_type}}" />
          <select class="select" disabled name="opp_type">
            <option>Pick one!</option>
            <option id="opt-closed-Buyer" value="Buyer">Buyer</option>
            <option id="opt-closed-Seller" value="Seller">Seller</option>
          </select>
        </p>
        <script>
          document.getElementById("opt-closed-{{opp_type}}").selected = true;
        </script>
        <label>Commission Percent:</label><br />
        <div class="currency-wrap">
          <span class="percent-code">%</span>
          <input
            class="number-price"
            name="opp_commission_percent"
            placeholder=""
            type="number"
            step="any"
            value="{{opp_commission_percent}}"
            onkeydown="return event.keyCode !== 69"
          />
        </div>
        <label>Transaction Price:</label><br />
        <div class="currency-wrap">
          <span class="currency-code">$</span>
          <input
            class="number-currency"
            name="opp_price"
            placeholder=""
            type="number"
            step="any"
            value="{{opp_price}}"
            onkeydown="return event.keyCode !== 69"
          />
        </div>

        <p>
          <label
            >Address:<sup
              ><i
                class="fa fa-asterisk"
                style="font-size: 8px; color: red"
              ></i></sup></label
          ><br />
          <input
            class="Closed"
            name="opp_address"
            placeholder=""
            type="text"
            value="{{opp_address}}"
          />
        </p>
        <p>
          <label
            >City:<sup
              ><i
                class="fa fa-asterisk"
                style="font-size: 8px; color: red"
              ></i></sup></label
          ><br />
          <input
            class="Closed"
            name="opp_city"
            placeholder=""
            type="text"
            value="{{opp_city}}"
          />
        </p>
        <p>
          <label
            >State:<sup
              ><i
                class="fa fa-asterisk"
                style="font-size: 8px; color: red"
              ></i></sup></label
          ><br />
          <select
            class="select Closed"
            name="opp_state"
            value="{{opp_state}}"
          >
            <option value="{{opp_state}}">{{opp_state}}</option>
            <optgroup label="United States">
              <option value="AK">Alaska</option>
              <option value="AL">Alabama</option>
              <option value="AR">Arkansas</option>
              <option value="AS">American Samoa</option>
              <option value="AZ">Arizona</option>
              <option value="CA">California</option>
              <option value="CO">Colorado</option>
              <option value="CT">Connecticut</option>
              <option value="DC">District of Columbia</option>
              <option value="DE">Delaware</option>
              <option value="FL">Florida</option>
              <option value="GA">Georgia</option>
              <option value="GU">Guam</option>
              <option value="HI">Hawaii</option>
              <option value="IA">Iowa</option>
              <option value="ID">Idaho</option>
              <option value="IL">Illinois</option>
              <option value="IN">Indiana</option>
              <option value="KS">Kansas</option>
              <option value="KY">Kentucky</option>
              <option value="LA">Louisiana</option>
              <option value="MA">Massachusetts</option>
              <option value="MD">Maryland</option>
              <option value="ME">Maine</option>
              <option value="MI">Michigan</option>
              <option value="MN">Minnesota</option>
              <option value="MO">Missouri</option>
              <option value="MP">Northern Mariana Islands</option>
              <option value="MS">Mississippi</option>
              <option value="MT">Montana</option>
              <option value="NA">National</option>
              <option value="NC">North Carolina</option>
              <option value="ND">North Dakota</option>
              <option value="NE">Nebraska</option>
              <option value="NH">New Hampshire</option>
              <option value="NJ">New Jersey</option>
              <option value="NM">New Mexico</option>
              <option value="NV">Nevada</option>
              <option value="NY">New York</option>
              <option value="OH">Ohio</option>
              <option value="OK">Oklahoma</option>
              <option value="OR">Oregon</option>
              <option value="PA">Pennsylvania</option>
              <option value="PR">Puerto Rico</option>
              <option value="RI">Rhode Island</option>
              <option value="SC">South Carolina</option>
              <option value="SD">South Dakota</option>
              <option value="TN">Tennessee</option>
              <option value="TX">Texas</option>
              <option value="UT">Utah</option>
              <option value="VA">Virginia</option>
              <option value="VI">Virgin Islands</option>
              <option value="VT">Vermont</option>
              <option value="WA">Washington</option>
              <option value="WI">Wisconsin</option>
              <option value="WV">West Virginia</option>
              <option value="WY">Wyoming</option>
            </optgroup>
            <optgroup label="Canada">
              <option value="AB">Alberta</option>
              <option value="BC">British Columbia</option>
              <option value="MB">Manitoba</option>
              <option value="NB">New Brunswick</option>
              <option value="NL">Newfoundland and Labrador</option>
              <option value="NT">Northwest Territories</option>
              <option value="NS">Nova Scotia</option>
              <option value="NU">Nunavut</option>
              <option value="ON">Ontario</option>
              <option value="PE">Prince Edward Island</option>
              <option value="QC">Quebec</option>
              <option value="SK">Saskatchewan</option>
              <option value="YT">Yukon</option>
            </optgroup>
          </select>
        </p>
        <p>
          <label
            >Zip Code:<sup
              ><i
                class="fa fa-asterisk"
                style="font-size: 8px; color: red"
              ></i></sup></label
          ><br />
          <input
            class="zip-code Closed"
            name="opp_zipcode"
            placeholder=""
            type="number"
            value="{{opp_postal_code}}"
            onkeydown="javascript: return event.keyCode === 8 ||
                event.keyCode === 46 ? true : !isNaN(Number(event.key))"
          />
        </p>
        <p class="input-group date">
          <label
            >Settlement Date:<sup
              ><i
                class="fa fa-asterisk"
                style="font-size: 8px; color: red"
              ></i></sup></label
          ><br />
          <input
            class="Closed"
            id="Settlement_Date_1"
            name="opp_settlement_date"
            placeholder=""
            type="text"
            value="{{opp_settlement_date}}"
          />
        </p>
      </div>
      {% if opp_stage != "Terminated" %}
      <div class="form-actions form-group">
        <button
          class="btn btn-primary btn-lg float-right btnSubmit"
          type="submit"
          value="submit"
        >
          Submit
        </button>
      </div>
      {% endif %}
    </div>
      <div
      id="show"
      style="display: none"
      name="terminate"
    >
      <h3 style="text-align: center">Terminate Transaction</h3>
      <div>
        <input hidden name="fub_deal_id" value="{{fub_deal_id}}" />
        <input hidden name="fub_person_id" value="{{fub_person_id}}" />
       
        <p>
          <label>Note: </label><br />
          <textarea
            id="note"
            name="notes"
            value="{{notes}}"
            type="text"
          ></textarea>
        </p>
        <div class="form-actions form-group">
          <button
            class="btn btn-primary btn-lg float-right btnSubmit"
            type="submit"
            value="submit"
          >
          Submit
        </button>
      </div>

      <!-- Starting Appointment form contents -->
      <div
        class="conditional"
        data-cond-option="opp_stage"
        data-cond-value="Closed"
      >
        <p>
          <label>Transaciton Type:</label><br />
          <input hidden id="opp_type" name="opp_type" value="{{opp_type}}" />
          <select class="select" disabled name="opp_type">
            <option>Pick one!</option>
            <option id="opt4-Buyer" value="Buyer">Buyer</option>
            <option id="opt4-Seller" value="Seller4">Seller</option>
          </select>
        </p>
        <script>
          document.getElementById("opt4-{{opp_type}}").selected = true;
        </script>
        <label>Commission Percent:</label><br />
        <div class="currency-wrap">
          <span class="percent-code">%</span>
          <input
            class="number-price"
            name="opp_commission_percent"
            placeholder=""
            type="number"
            step="any"
            value="{{opp_commission_percent}}"
            onkeydown="return event.keyCode !== 69"
          />
        </div>
        </div>
      </div>
    </form>
  </div>
  <script src="https://cdn.jsdelivr.net/npm/jquery@2.2.4/dist/jquery.min.js"></script>
  <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.4.1/js/bootstrap.min.js"></script>
  <script
    src="https://eia.followupboss.com/embeddedApps-v1.0.0.js"
    type="text/javascript"
  ></script>
  <script src="https://code.jquery.com/ui/1.12.1/jquery-ui.js"></script>
  <script src="{% static 'js/conditionize.flexible.jquery.js' %}"></script>
  <script src="https://kit.fontawesome.com/6c7e0274d0.js" crossorigin="anonymous"></script>

  <script>
    $(function () {
      $("#Agreement_Signed_Date_1").datepicker();
      $("#Agreement_Expiration_Date_1").datepicker();
      $("#Under_Contract_Date_1").datepicker();
      $("#Forecasted_Close_Date_1").datepicker();
      $("#Appoitnment_Date_1").datepicker();
      $("#Appt_Met_Date").datepicker();
      $("#Settlement_Date_1").datepicker();
      $("#Under_Contract_Date_2").datepicker();
      $("#Forecasted_Close_Date_2").datepicker();
    });
  </script>

  <script>
    /* * * * * * * * * * * * * * * * * *
     * Show/hide fields conditionally
     * * * * * * * * * * * * * * * * * */
    (function ($) {
      $.fn.conditionize = function (options) {
        var settings = $.extend(
          {
            hideJS: true,
          },
          options
        );

        $.fn.showOrHide = function (listenTo, listenFor, $section) {
          if (
            $(listenTo).is("select, input[type=text]") &&
            $(listenTo).val() == listenFor
          ) {
            $section.slideDown();
          } else if ($(listenTo + ":checked").val() == listenFor) {
            $section.slideDown();
          } else {
            $section.slideUp();
          }
        };

        $.fn.required = function () { 
          // console.log($("#stage_select").val(), $("#opp_type_app_set").val(), $("#Agreement_Signed_Type").val());
          // if ($("#stage_select").val() == "Appointment_Set") {
          //   $("#opp_type_app_set").attr(
          //     "required",
          //     ""
          //   );
          //   $("#opp_type_app_set").attr(
          //     "data-error",
          //     "This field is required."
          //   );
          // } 
          // else {
          //   $("#opp_type_app_set").removeAttr('required');
          // }

          // if ($("#stage_select").val() == "Agreement_Signed") {
          //   $(
          //     "#Agreement_Signed_Date_1, #Agreement_Expiration_Date_1"
          //   ).attr("required", "");
          //   $(
          //     "#Agreement_Signed_Date_1, #Agreement_Expiration_Date_1"
          //   ).attr("data-error", "This field is required.");
          // } 
          // else {
          //   $("#Agreement_Signed_Date_1, #Agreement_Expiration_Date_1").removeAttr('required');
          // }
          
          // if ($("#stage_select").val() == "Pending") {
          //   $(
          //     ".Pending"
          //   ).attr("required", "");
          //   $(
          //     ".Pending"
          //   ).attr("data-error", "This field is required.");
          // } 
          // else{
          //   $(".Pending").removeAttr('required');
          // } 
          
          // if ($("#stage_select").val() == "Closed") {
          //   $(".Closed").attr(
          //     "required",
          //     ""
          //   );
          //   $(".Closed").attr(
          //     "data-error",
          //     "This field is required."
          //   );
          // } 
          // else {
          //   $(".Closed").removeAttr('required');
          // }
          
          // if ($("#Agreement_Signed_Type").val() == "Seller" && $("#stage_select").val() != "Terminated") {
          //   $(".opt-signed-Seller").attr("required", "");
          //   $(".opt-signed-Seller").attr(
          //     "data-error",
          //     "This field is required."
          //   );
          // } 
          // else {
          //   $(".opt-signed-Seller").removeAttr('required');
          // }
          
          // if ($("#opp_type_app_set").val() == "Seller" && $("#stage_select").val() != "Terminated") {
          //   $(".opt-set-Seller").attr("required", "");
          //   $(".opt-set-Seller").attr(
          //     "data-error",
          //     "This field is required."
          //   );
          // } 
          // else {            
          //   $(".opt-set-Seller").removeAttr('required'); 
          // }
          
          // if ($("#opp_type_app_set").val() == "BuyerSeller" && $("#stage_select").val() != "Terminated") {
          //   $(".opt-set-BuyerSeller").attr("required", "");
          //   $(".opt-set-BuyerSeller").attr(
          //     "data-error",
          //     "This field is required."
          //   );
          // } 
          // else {
          //   $(".opt-set-BuyerSeller").removeAttr('required'); 
          // }
          
        };

        return this.each(function () {
          var listenTo = "[name=" + $(this).data("cond-option") + "]";
          var listenFor = $(this).data("cond-value");
          var $section = $(this);

          //Set up event listener
          $(listenTo).on("change", function () {
            $.fn.showOrHide(listenTo, listenFor, $section);
            $.fn.required();
          });
          //If setting was chosen, hide everything first...
          if (settings.hideJS) {
            $(this).hide();
          }
          //Show based on current value on page load
          $.fn.showOrHide(listenTo, listenFor, $section);
        });
      };
    })(jQuery);

    $(".conditional").conditionize();
  </script>

<script>
  /* * * * * * * * * * * * * * *
   * Show/hide fields on button *
   * * * * * * * * * * * * * * */
  const updateDiv = document.getElementById("update");
  const targetDiv = document.getElementById("show");
  const btn = document.getElementById("toggle");
  btn.onclick = function () {
    targetDiv.style.display !== "none"
      ? (targetDiv.style.display = "none")
      : (targetDiv.style.display = "block") && $('#stage_select').val('Terminated').trigger('change') && $("#toggle").html('<i class="fa-solid fa-angle-left"></i> Back'),
      updateDiv.style.display !== "none"
        ? (updateDiv.style.display = "none")
        : (updateDiv.style.display = "block") && 
        $('#stage_select').val('').trigger('change') &&  
        $("#toggle").html(`Terminate <i title="Terminate Transaction" class="fa-solid fa-ban"></i>`);
  };
  // const backbtn = document.getElementById("backbtn");
  
  // backbtn.onclick = function Rediect(event) {
  //   event.preventDefault();
  //   console.log("Heyyyyyyyyy")
  //   var redirect = "{% url 'list_view' %}?context={{context_data}}&signature={{signature}}";
  //   window.location.href = "{% url 'list_view' %}?context={{context_data}}&signature={{signature}}";
  //   return false
    
  // }
</script>
<script>
  $(document).ready(function () {
    $("#update_form").submit(function () {
        $(".btnSubmit").attr("disabled", true);
        return true;
    });
});
</script>

</body>
