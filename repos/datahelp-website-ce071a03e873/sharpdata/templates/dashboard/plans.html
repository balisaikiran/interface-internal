{% load static %}

<!doctype html>
<!--[if lt IE 7]>
<html class="no-js lt-ie9 lt-ie8 lt-ie7" lang=""> <![endif]-->
<!--[if IE 7]>
<html class="no-js lt-ie9 lt-ie8" lang=""> <![endif]-->
<!--[if IE 8]>
<html class="no-js lt-ie9" lang=""> <![endif]-->
<!--[if gt IE 8]><!-->
<html class="no-js" lang="">
<!--<![endif]-->

<head>
    <meta charset="utf-8">
    <meta content="IE=edge" http-equiv="X-UA-Compatible">
    <title>DataLabz - Signup</title>
    <meta content=" sharpdata login page" name="description">
    <meta content="width=device-width, initial-scale=1" name="viewport">

    <link href="https://i.imgur.com/QRAUqs9.png" rel="apple-touch-icon">
    <link href="https://i.imgur.com/QRAUqs9.png" rel="shortcut icon">
    <script data-cb-site="datahelp-test" src="https://js.chargebee.com/v2/chargebee.js"></script>
    <link href="https://cdn.jsdelivr.net/npm/normalize.css@8.0.0/normalize.min.css" rel="stylesheet">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@4.1.3/dist/css/bootstrap.min.css" rel="stylesheet">
    <link href="https://cdn.jsdelivr.net/npm/font-awesome@4.7.0/css/font-awesome.min.css" rel="stylesheet">
    <link href="https://cdn.jsdelivr.net/gh/lykmapipo/themify-icons@0.1.2/css/themify-icons.css" rel="stylesheet">
    <link href="https://cdn.jsdelivr.net/npm/pixeden-stroke-7-icon@1.2.3/pe-icon-7-stroke/dist/pe-icon-7-stroke.min.css"
          rel="stylesheet">
    <link href="https://cdnjs.cloudflare.com/ajax/libs/flag-icon-css/3.2.0/css/flag-icon.min.css" rel="stylesheet">
    <link href="{%static 'assets/css/cs-skin-elastic.css'%}" rel="stylesheet">
    <link href="{% static 'assets/css/style.css'%}" rel="stylesheet">
    <link href='https://fonts.googleapis.com/css?family=Quantico' rel='stylesheet'>
    <link href='https://fonts.googleapis.com/css?family=Open+Sans:400,600,700,800' rel='stylesheet' type='text/css'>

    <link href='https://fonts.googleapis.com/css?family=Open+Sans:400,600,700,800' rel='stylesheet' type='text/css'>
    <link href="https://fonts.googleapis.com/css2?family=Pacifico&display=swap" rel="stylesheet">
    <!-- <script type="text/javascript" src="https://cdn.jsdelivr.net/html5shiv/3.7.3/html5shiv.min.js"></script> -->
    <!-- Global site tag (gtag.js) - Google Analytics -->
    <script async src="https://www.googletagmanager.com/gtag/js?id=UA-78898293-3"></script>
    <script>
        window.dataLayer = window.dataLayer || [];

        function gtag() {
            dataLayer.push(arguments);
        }

        gtag('js', new Date());

        gtag('config', 'UA-78898293-3');
    </script>
    <style>
        label {
            color: #4c4c4c !important;
            text-transform: capitalize !important;
            font-size: 15px !important;
            /* transform: translate(15px,7px); */
            margin-bottom: 2px;
            /* padding: 1px 3px; */
        }

        @import url('https://fonts.googleapis.com/css?family=Muli&display=swap');
        @import url('https://fonts.googleapis.com/css?family=Roboto:300&display=swap');

        * {
            box-sizing: border-box;
        }

        body {
            background-color: #fafafa;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            font-family: 'Roboto', sans-serif;
            margin-bottom: 60px;
        }

        h1 {
            letter-spacing: 1px;
        }

        .pricing-container {
            display: flex;
        }

        .pricing {
            background-color: #fff;
            border: 1px solid #eee;
            margin: 10px;
            text-align: center;
        }

        .pricing.highlight {
            border-top: 2px solid #50BC01;
            box-shadow: 0 0 30px 10px rgba(0, 0, 0, 0.1);
        }

        .pricing h1 {
            color: #5CAEFE;
            margin: 30px 0 0;
        }

        .pricing h4 {
            margin: 20px 0 0;
        }

        .pricing small.green {
            color: #50BC01;
            margin: 0;
        }

        .pricing small.green + h1 {
            margin-top: 10px;
        }

        .pricing small {
            color: #777;
        }

        .pricing ul {
            list-style-type: none;
            padding: 0;
            margin: 40px 0;
        }

        .pricing ul li {
            margin: 20px 30px;
            max-width: 250px;
        }

        .pricing button {
            background-color: #5CAEFE;
            border: 0;
            border-radius: 2px;
            color: #fff;
            padding: 12px 20px;
            margin-bottom: 30px;
        }

        @media screen and (max-width: 480px) {

            .social-panel-container.visible {
                transform: translateX(0px);
            }

            .floating-btn {
                right: 10px;
            }
        }
    </style>

    <!-- tapfiliate Code -->
    <script src="https://script.tapfiliate.com/tapfiliate.js" type="text/javascript" async></script>
    <script type="text/javascript">
    (function(t,a,p){t.TapfiliateObject=a;t[a]=t[a]||function(){ (t[a].q=t[a].q||[]).push(arguments)}})(window,'tap');

    tap('create', '37727-1b0329', { integration: "javascript" });
    tap('detect');
    </script>
    <!-- tapfiliate Code  Ends-->

</head>

<body class="bg-white">

<div class=" d-flex align-content-center flex-wrap">

    <div class="container">
        <div class="login-logo align-content-center">
            <a href="/">

                <h1 style="font-family: 'Quantico'; color:#1d06fb ;font-size: 50px;
    font-weight: 600;letter-spacing: 3px;">DataLabz</h1>
                <!-- <img class="align-content img-fluid" src="{% static 'images/logo.png'%}" alt=""> -->
            </a>
        </div>
        <div class="pricing-header px-3 py-3 pt-md-5 pb-md-4 mx-auto text-center">
            <h1 class="display-4">Webfrom Plans</h1>
            <p class="lead">Select one of the webform plans</p>
        </div>

        <div class="container">
            <div class="card-deck mb-3 text-center">
                {% for p in webform_plans %}
                <div class="card mb-4 box-shadow">
                    <div class="card-header">
                        <h4 class="my-0 font-weight-normal">{{p.name}}</h4>
                    </div>
                    <div class="card-body d-flex flex-column">
                        <h1 class="card-title pricing-card-title">${{p.price}} <small class="text-muted">/ mo</small>
                        </h1>
                        {% if p.setup_cost %}
                        <h4 class="card-title pricing-card-title"> Setup Fee ${{p.setup_cost}} <small
                                class="text-muted"></small></h4>
                        {% endif %}
                        <ul class="list-unstyled mt-3 mb-4">
                            <li>{{p.description}}</li>

                        </ul>
                        <a data-cb-plan-id="fub-webform-pipeline" data-cb-type="checkout" href="javascript:void(0)">
                            <button class="mt-auto btn btn-lg btn-block btn-outline-primary" style="position:absolute; bottom:4%; left: 2%; width: 94%;"
                                    type="button">Subscribe
                            </button>
                        </a>
                    </div>
                </div>
                {% endfor %}

            </div>
        </div>

        <div class="pricing-header px-3 py-3 pt-md-5 pb-md-4 mx-auto text-center">
            <h1 class="display-4">Integration Plans</h1>
            <p class="lead">Select one of the webform plans</p>
        </div>

        <div class="container">
            <div class="card-deck mb-3 text-center">
                {% for p in other_plans %}
                <div class="card mb-4 box-shadow">
                    <div class="card-header">
                        <h4 class="my-0 font-weight-normal">{{p.name}}</h4>
                    </div>
                    <div class="card-body d-flex flex-column">
                        <h1 class="card-title pricing-card-title">${{p.price}} <small class="text-muted">/ mo</small>
                        </h1>
                        {% if p.setup_cost %}
                        <h4 class="card-title pricing-card-title"> Setup Fee ${{p.setup_cost}} <small
                                class="text-muted"></small></h4>
                        {% endif %}
                        <ul class="list-unstyled mt-3 mb-4">
                            <li>{{p.description}}</li>

                        </ul>
                        <a data-cb-plan-id="fub-webform-pipeline" data-cb-type="checkout" href="javascript:void(0)">
                            <button class="mt-auto btn btn-lg btn-block btn-outline-primary" type="button">Subscribe
                            </button>
                        </a>
                    </div>
                </div>
                {% endfor %}

            </div>
        </div>


    </div>
</div>
<script crossorigin="anonymous"
        integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" src="https://code.jquery.com/jquery-3.4.1.min.js"></script>
<script src="https://unpkg.com/sweetalert/dist/sweetalert.min.js"></script>

<script src="https://cdn.jsdelivr.net/npm/jquery@2.2.4/dist/jquery.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/popper.js@1.14.4/dist/umd/popper.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/bootstrap@4.1.3/dist/js/bootstrap.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/jquery-match-height@0.7.2/dist/jquery.matchHeight.min.js"></script>
<script src="{% static 'assets/js/main.js'%}"></script>
<script>
    {%
        if is_error == '1' %}
    swal({
        title: '{{message_title}}',
        text: '{{message}}',
        icon: 'error',
        confirmButtonText: 'Ok'
    })
    {%
        endif %
    }
</script>


<script>
    // Disable space in team id
    $("input#team_id").on({
        keydown: function (e) {
            if (e.which === 32)
                return false;
        },
        change: function () {
            this.value = this.value.replace(/\s/g, "");
        }
    });

    $(document).ready(function () {
        // check valid team_id
        $("#team_id").on({
            keyup: function () {
                $.ajax({
                    method: "get",
                    url: "/secure/check_team?team=" + $("#team_id").val(),
                    dataType: "json"
                }).done(function (data) {
                    // Using .map method to retrieve data from array
                    $.map(data, function (user, i) {
                        // Using .append to insert data in the DOM
                        console.log(user);
                        if (user == false) {
                            $('#popover-team-no').css('display', "block");
                            $('#popover-team-yes').css('display', "none");
                        } else {
                            $('#popover-team-no').css('display', "none");
                            $('#popover-team-yes').css('display', "block");
                        }
                    });
                });
            }
        });


        $('#user_email').blur(function () {
            var email = $('#user_email').val();
            if (IsEmail(email) == false) {
                $('#popover-email').css('display', "block");
            } else {
                $('#popover-email').css('display', "none");
            }
        });
        $('#user_password').keyup(function () {
            var password = $('#user_password').val();
            if (checkStrength(password) == false) {
                var a = 1;
            }
        });
        $('#user_confirm_password').keyup(function () {
            console.log($('#password').val(),);
            if ($('#user_password').val() != $('#user_confirm_password').val()) {
                $('#popover-cpassword').css("display", "block");
            } else {
                $('#popover-cpassword').css("display", "none");
                if (checkStrength($('#user_password').val()) == false) {
                    $('#popover-cpassword-2').css("display", "block");
                } else {
                    $('#popover-cpassword-2').css("display", "none");
                    $('#sign-up').attr("disabled", false);
                }

            }
        });
        $('#user_phone').keyup(function () {
            if ($('#user_phone').val().length != 10) {
                $('#popover-cnumber').css("display", "block");
            } else {
                $('#popover-cnumber').css("display", "none");
            }
        });
        $('#sign-up').click(function () {
            if ($('#sign-up').prop('disabled')) {
                $('#sign-up').popover({
                    html: true,
                    trigger: 'hover',
                    placement: 'below',
                    offset: 20,
                    content: function () {
                        return $('#sign-up-popover').html();
                    }
                });
            }
            if ($("#planFubTwillio").is(":checked") != true && $("#planFubSisu").is(":checked") != true) {
                swal({
                    title: 'Plan not selected',
                    text: 'Please select atleast one plan to signup',
                    icon: 'warning',
                    confirmButtonText: 'Ok'
                });
                return false;
            } else if ($("#planFubTwillio").is(":checked") == true && $("#planFubSisu").is(":checked") != true) {
                swal({
                    title: 'Terms and Conditions',
                    text: 'Please go througth',
                    icon: 'warning',
                    confirmButtonText: 'Ok'
                });
            } else if ($("#planFubReport").is(":checked") == true && $("#planFubSisu").is(":checked") != true) {
                swal({
                    title: 'Terms and Conditions',
                    text: 'Please go througth',
                    icon: 'warning',
                    confirmButtonText: 'Ok'
                });
            }
        });

        function IsEmail(email) {
            var regex = /^([a-zA-Z0-9_\.\-\+])+\@(([a-zA-Z0-9\-])+\.)+([a-zA-Z0-9]{2,4})+$/;
            if (!regex.test(email)) {
                return false;
            } else {
                return true;
            }
        }

        function checkStrength(password) {
            var strength = 0;


            //If password contains both lower and uppercase characters, increase strength value.
            if (password.match(/([a-z].*[A-Z])|([A-Z].*[a-z])/)) {
                strength += 1;
                $('.low-upper-case').addClass('text-success');
                $('.low-upper-case i').removeClass('fa-file-text').addClass('fa-check');
                $('#popover-password-top').addClass('hide');


            } else {
                $('.low-upper-case').removeClass('text-success');
                $('.low-upper-case i').addClass('fa-file-text').removeClass('fa-check');
                $('#popover-password-top').removeClass('hide');
            }

            //If it has numbers and characters, increase strength value.
            if (password.match(/([a-zA-Z])/) && password.match(/([0-9])/)) {
                strength += 1;
                $('.one-number').addClass('text-success');
                $('.one-number i').removeClass('fa-file-text').addClass('fa-check');
                $('#popover-password-top').addClass('hide');

            } else {
                $('.one-number').removeClass('text-success');
                $('.one-number i').addClass('fa-file-text').removeClass('fa-check');
                $('#popover-password-top').removeClass('hide');
            }

            //If it has one special character, increase strength value.
            if (password.match(/([!,%,&,@,#,$,^,*,?,_,~])/)) {
                strength += 1;
                $('.one-special-char').addClass('text-success');
                $('.one-special-char i').removeClass('fa-file-text').addClass('fa-check');
                $('#popover-password-top').addClass('hide');

            } else {
                $('.one-special-char').removeClass('text-success');
                $('.one-special-char i').addClass('fa-file-text').removeClass('fa-check');
                $('#popover-password-top').removeClass('hide');
            }

            if (password.length > 7) {
                strength += 1;
                $('.eight-character').addClass('text-success');
                $('.eight-character i').removeClass('fa-file-text').addClass('fa-check');
                $('#popover-password-top').addClass('hide');

            } else {
                $('.eight-character').removeClass('text-success');
                $('.eight-character i').addClass('fa-file-text').removeClass('fa-check');
                $('#popover-password-top').removeClass('hide');
            }


            // If value is less than 2

            if (strength < 2) {
                $('#result').removeClass()
                $('#password-strength').addClass('progress-bar-danger');

                $('#result').addClass('text-danger').text('Invalid');
                $('#password-strength').css('width', '10%');
                return false;
            } else if (strength == 2) {
                $('#result').addClass('good');
                $('#password-strength').removeClass('progress-bar-danger');
                $('#password-strength').addClass('progress-bar-warning');
                $('#result').addClass('text-warning').text('Invalid')
                $('#password-strength').css('width', '60%');
                return false;
            } else if (strength == 4) {
                $('#result').removeClass()
                $('#result').addClass('strong');
                $('#password-strength').removeClass('progress-bar-warning');
                $('#password-strength').addClass('progress-bar-success');
                $('#result').addClass('text-success').text('Valid');
                $('#password-strength').css('width', '100%');

                return true;
            }

        }

    });

    function checkSubmission() {
        alert('checkSubmission');
        var email = document.getElementById("user_email").value;
        var password = document.getElementById("user_password").value;
        var password_verify = document.getElementById("user_confirm_password").value;
        checkMail_response = checkMail(email);
        verifyPassword_response = verifyPassword(password, password_verify);
        if (checkMail_response == true & verifyPassword_response == true) {
            return true;
        } else {
            Swal.fire({
                icon: 'error',
                title: 'Oops..!',
                text: 'Some Error!',
                footer: '<a href>Why do I have this issue?</a>'
            })
            return false;
        }
    }

    var password = document.getElementById("user_password")
        , confirm_password = document.getElementById("user_confirm_password");

    function validatePassword() {
        if (password.value != confirm_password.value) {
            confirm_password.setCustomValidity("Passwords Don't Match");
        } else {
            confirm_password.setCustomValidity('');
        }
    }

    password.onchange = validatePassword;
    confirm_password.onkeyup = validatePassword;
</script>


</body>

</html>